<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta name="google-site-verification" content="Fn8ri9RLegwF2izp3g2BTQ5UrPZNY5ehkJ-U6vlHrMM" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gold Calculator</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            gold: {
              50: '#FFF9E6',
              100: '#FFF3CC',
              200: '#FFE799',
              300: '#FFDB66',
              400: '#FFD033',
              500: '#D4AF37',
              600: '#C5A600',
              700: '#A38800',
              800: '#7A6700',
              900: '#524500',
            }
          },
          boxShadow: {
            'gold': '0 4px 14px -2px rgba(212, 175, 55, 0.3)',
            'gold-lg': '0 10px 25px -3px rgba(212, 175, 55, 0.3)',
          },
          fontFamily: {
            'sans': ['Poppins', 'ui-sans-serif', 'system-ui'],
          },
          keyframes: {
            shimmer: {
              '0%': { backgroundPosition: '-1000px 0' },
              '100%': { backgroundPosition: '1000px 0' },
            },
            pulse: {
              '0%, 100%': { opacity: 1 },
              '50%': { opacity: 0.5 },
            }
          },
          animation: {
            shimmer: 'shimmer 2s infinite linear',
            pulse: 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
          }
        }
      }
    }
  </script>

  <!-- Poppins Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- FontAwesome Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <style>
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(30px); }
      to   { opacity: 1; transform: translateX(0); }
    }
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
    @keyframes scaleIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    .animate-fadeInUp { animation: fadeInUp 0.6s ease-out forwards; }
    .animate-slideInRight { animation: slideInRight 0.5s ease-out forwards; animation-delay: calc(var(--delay) * 0.1s); }
    .animate-float { animation: float 3s ease-in-out infinite; }
    .animate-scaleIn { animation: scaleIn 0.5s ease-out forwards; }
    
    .gold-gradient {
      background: linear-gradient(135deg, #D4AF37 0%, #F2D57E 50%, #D4AF37 100%);
    }
    .gold-text-gradient {
      background: linear-gradient(to right, #C5A600, #F5DEB3, #D4AF37);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .shimmer {
      background: linear-gradient(to right, #efefef 8%, #f5f5f5 18%, #efefef 33%);
      background-size: 1000px 100%;
      animation: shimmer 2s infinite linear;
    }
    
    /* Dark mode styles */
    .dark .shimmer {
      background: linear-gradient(to right, #2a2a2a 8%, #3a3a3a 18%, #2a2a2a 33%);
      background-size: 1000px 100%;
    }
    
    /* Custom scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    .dark ::-webkit-scrollbar-track {
      background: #2d2d2d;
    }
    ::-webkit-scrollbar-thumb {
      background: #D4AF37;
      border-radius: 10px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background: #C5A600;
    }
    
    /* Light/Dark Background */
    .light-bg {
      background: linear-gradient(135deg, #f9f7f2 0%, #ffffff 100%);
    }
    .dark .light-bg {
      background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
    }

    /* Background texture overlay */
    .subtle-pattern {
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23D4AF37' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
    .dark .subtle-pattern {
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }
  </style>
</head>

<body class="min-h-screen light-bg subtle-pattern transition-colors duration-300 text-gray-800 dark:text-gray-200">
  <!-- Dark Mode Toggle -->
  <div class="absolute top-4 right-4 z-10">
    <button id="darkModeToggle" class="p-2 rounded-full bg-white dark:bg-gray-800 shadow-md transition-all">
      <i class="fas fa-sun text-gold-600 dark:hidden"></i>
      <i class="fas fa-moon text-gold-400 hidden dark:block"></i>
    </button>
  </div>

  <main class="py-12 px-4 sm:px-6 md:py-16">
    <div class="max-w-4xl mx-auto">
      <!-- Header -->
      <div class="text-center mb-10 animate-float">
        <div class="inline-block relative">
          <span class="gold-text-gradient text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight">
            Gold Calculator
          </span>
          <div class="absolute -top-3 -right-3 transform rotate-12 text-gold-500">
            <i class="fas fa-coins"></i>
          </div>
        </div>
        <p class="mt-3 text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
          Calculate real-time gold prices with precise making charges and tax calculations
        </p>
      </div>
    
      <!-- Main Card -->
      <div class="bg-white dark:bg-gray-800 rounded-3xl overflow-hidden shadow-gold-lg border border-gold-200 dark:border-gold-900 transition-all duration-300">
        <!-- Tabs -->
        <div class="flex border-b border-gold-100 dark:border-gray-700">
          <button class="flex-1 py-4 px-6 text-center font-medium text-gold-600 dark:text-gold-400 border-b-2 border-gold-500 focus:outline-none">
            <i class="fas fa-calculator mr-2"></i> Calculator
          </button>
          <button class="flex-1 py-4 px-6 text-center font-medium text-gray-500 dark:text-gray-400 hover:text-gold-500 dark:hover:text-gold-400 focus:outline-none transition-colors">
            <i class="fas fa-chart-line mr-2"></i> Trends
          </button>
        </div>

        <!-- Calculator Content -->
        <div class="p-6 md:p-8">
          <!-- Gold Price Section -->
          <div class="mb-8">
            <div class="flex justify-between items-center mb-4">
              <h2 class="text-lg font-semibold text-gray-700 dark:text-gray-300">
                <i class="fas fa-sync-alt mr-2 text-gold-500"></i> Live Gold Prices
              </h2>
              <div id="lastUpdated" class="text-xs text-gray-500 dark:text-gray-400"></div>
            </div>
            
            <!-- Gold Price Cards -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
              <!-- 24K Gold Price -->
              <div class="relative overflow-hidden rounded-xl bg-gradient-to-r from-gold-50 to-gold-100 dark:from-gray-900 dark:to-gray-800 p-4 shadow-md">
                <div class="absolute -top-1 -right-1 bg-gold-500 text-white text-[10px] px-2 py-0.5 rounded-bl-lg font-medium">
                  99.9% PURE
                </div>
                <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-1">24K Gold</h3>
                <div class="text-lg font-bold text-gold-600 dark:text-gold-400 flex items-center">
                  ₹<span id="price_24k" class="price-display">0</span>
                </div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">per gram</div>
              </div>
              
              <!-- 22K Gold Price -->
              <div class="relative overflow-hidden rounded-xl bg-gradient-to-r from-gold-50 to-gold-100 dark:from-gray-900 dark:to-gray-800 p-4 shadow-md">
                <div class="absolute -top-1 -right-1 bg-gold-500 text-white text-[10px] px-2 py-0.5 rounded-bl-lg font-medium">
                  91.67% PURE
                </div>
                <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-1">22K Gold</h3>
                <div class="text-lg font-bold text-gold-600 dark:text-gold-400 flex items-center">
                  ₹<span id="price_22k" class="price-display">0</span>
                </div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">per gram</div>
              </div>
              
              <!-- 18K Gold Price -->
              <div class="relative overflow-hidden rounded-xl bg-gradient-to-r from-gold-50 to-gold-100 dark:from-gray-900 dark:to-gray-800 p-4 shadow-md">
                <div class="absolute -top-1 -right-1 bg-gold-500 text-white text-[10px] px-2 py-0.5 rounded-bl-lg font-medium">
                  75% PURE
                </div>
                <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-1">18K Gold</h3>
                <div class="text-lg font-bold text-gold-600 dark:text-gold-400 flex items-center">
                  ₹<span id="price_18k" class="price-display">0</span>
                </div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">per gram</div>
              </div>
              
              <!-- 14K Gold Price -->
              <div class="relative overflow-hidden rounded-xl bg-gradient-to-r from-gold-50 to-gold-100 dark:from-gray-900 dark:to-gray-800 p-4 shadow-md">
                <div class="absolute -top-1 -right-1 bg-gold-500 text-white text-[10px] px-2 py-0.5 rounded-bl-lg font-medium">
                  58.33% PURE
                </div>
                <h3 class="text-sm text-gray-600 dark:text-gray-400 mb-1">14K Gold</h3>
                <div class="text-lg font-bold text-gold-600 dark:text-gold-400 flex items-center">
                  ₹<span id="price_14k" class="price-display">0</span>
                </div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-1">per gram</div>
              </div>
            </div>
            
            <!-- API Status -->
            <div class="flex justify-end mt-3">
              <div id="apiStatus" class="text-xs py-1 px-3 rounded-full inline-flex items-center">
                <span class="w-2 h-2 rounded-full mr-1"></span>
                <span>Fetching latest prices</span>
              </div>
            </div>
            
            <!-- Loading Overlay -->
            <div id="priceLoading" class="absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-gray-800/80 z-10 hidden">
              <div class="flex flex-col items-center">
                <div class="shimmer w-16 h-16 rounded-full mb-3"></div>
                <div class="shimmer w-40 h-4 rounded-full"></div>
              </div>
            </div>
          </div>
    
          <!-- Calculator Form -->
          <form id="calculatorForm" class="space-y-6">
            <!-- Purity & Weight -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="space-y-2">
                <label class="block font-medium text-gray-700 dark:text-gray-300">
                  <i class="fas fa-medal mr-2 text-gold-500"></i> Gold Purity
                </label>
                <div class="relative">
                  <select id="purity" class="w-full p-3 pl-5 pr-10 text-base bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold-500 dark:focus:ring-gold-600 focus:border-transparent transition-shadow">
                    <option value="24k">24K - Pure Gold (99.9%)</option>
                    <option value="22k" selected>22K - (91.67%)</option>
                    <option value="18k">18K - (75%)</option>
                    <option value="14k">14K - (58.33%)</option>
                  </select>
                  <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                    <i class="fas fa-chevron-down text-gray-400"></i>
                  </div>
                </div>
                <div class="text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center">
                  <i class="fas fa-info-circle mr-1"></i> Current price: ₹<span id="selected_price">0</span>/g
                </div>
              </div>
              <div class="space-y-2">
                <label class="block font-medium text-gray-700 dark:text-gray-300">
                  <i class="fas fa-weight-hanging mr-2 text-gold-500"></i> Weight (grams)
                </label>
                <div class="relative">
                  <input id="weight" type="number" min="0.01" step="0.01" value="10" 
                    class="w-full p-3 pl-5 text-base bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold-500 dark:focus:ring-gold-600 focus:border-transparent transition-shadow" />
                  <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                    <span class="text-gray-500 dark:text-gray-400">g</span>
                  </div>
                </div>
              </div>
            </div>
    
            <!-- Making Charges -->
            <div class="space-y-2">
              <label class="block font-medium text-gray-700 dark:text-gray-300">
                <i class="fas fa-tools mr-2 text-gold-500"></i> Making Charges
              </label>
              <div class="bg-gray-50 dark:bg-gray-900 rounded-xl p-4 border border-gray-200 dark:border-gray-700">
                <div class="flex flex-wrap gap-4 mb-3">
                  <label class="inline-flex items-center cursor-pointer">
                    <input type="radio" name="mcType" value="percent" checked 
                      class="sr-only peer" />
                    <div class="w-6 h-6 bg-white dark:bg-gray-700 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center peer-checked:border-gold-500 dark:peer-checked:border-gold-400 peer-checked:bg-gold-50 dark:peer-checked:bg-gray-800 transition-all">
                      <div class="w-3 h-3 rounded-full bg-gold-500 dark:bg-gold-400 hidden peer-checked:block"></div>
                    </div>
                    <span class="ml-2 text-gray-700 dark:text-gray-300">Percentage (%)</span>
                  </label>
                  <label class="inline-flex items-center cursor-pointer">
                    <input type="radio" name="mcType" value="fixed" 
                      class="sr-only peer" />
                    <div class="w-6 h-6 bg-white dark:bg-gray-700 rounded-full border-2 border-gray-300 dark:border-gray-600 flex items-center justify-center peer-checked:border-gold-500 dark:peer-checked:border-gold-400 peer-checked:bg-gold-50 dark:peer-checked:bg-gray-800 transition-all">
                      <div class="w-3 h-3 rounded-full bg-gold-500 dark:bg-gold-400 hidden peer-checked:block"></div>
                    </div>
                    <span class="ml-2 text-gray-700 dark:text-gray-300">Fixed (₹/g)</span>
                  </label>
                </div>
                <div class="relative">
                  <input id="mcValue" type="number" min="0" step="0.01" value="8" 
                    class="w-full p-3 pl-5 text-base bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold-500 dark:focus:ring-gold-600 focus:border-transparent transition-shadow" />
                  <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                    <span id="mcUnit" class="text-gray-500 dark:text-gray-400">%</span>
                  </div>
                </div>
              </div>
            </div>
    
            <!-- GST Rate -->
            <div class="space-y-2">
              <label class="block font-medium text-gray-700 dark:text-gray-300">
                <i class="fas fa-percent mr-2 text-gold-500"></i> GST Rate
              </label>
              <div class="relative">
                <input id="gstRate" type="number" min="0" max="100" step="0.01" value="3" 
                  class="w-full p-3 pl-5 text-base bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-xl focus:ring-2 focus:ring-gold-500 dark:focus:ring-gold-600 focus:border-transparent transition-shadow" />
                <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                  <span class="text-gray-500 dark:text-gray-400">%</span>
                </div>
              </div>
            </div>
    
            <!-- Calculate Button -->
            <button type="submit" id="calculateBtn" 
              class="w-full py-4 px-6 text-center text-white font-semibold rounded-xl 
              gold-gradient hover:shadow-lg active:scale-[0.98] transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-gold-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800">
              <i class="fas fa-calculator mr-2"></i> Calculate Total Price
            </button>
          </form>
        </div>
      </div>
      
      <!-- Results Card -->
      <div id="resultCard" class="mt-8 hidden">
        <div class="bg-gradient-to-br from-gold-50 to-white dark:from-gray-900 dark:to-gray-800 rounded-3xl overflow-hidden shadow-gold-lg border border-gold-100 dark:border-gray-700 animate-scaleIn">
          <div class="p-6 md:p-8">
            <h2 class="text-2xl font-bold text-gold-600 dark:text-gold-400 flex items-center mb-6">
              <i class="fas fa-receipt mr-3"></i> Price Breakdown
            </h2>
            
            <div class="space-y-4">
              <div id="resultPurity" class="text-sm text-gray-600 dark:text-gray-400 mb-4">
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full bg-gold-100 dark:bg-gray-700 text-gold-800 dark:text-gold-300 mr-2">
                  <i class="fas fa-certificate mr-1"></i>
                  <span id="display_purity">22K Gold</span>
                </span>
                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300">
                  <i class="fas fa-weight mr-1"></i>
                  <span id="display_weight">10g</span>
                </span>
              </div>
              
              <!-- Price Breakdown -->
              <div class="space-y-3 mb-6">
                <div class="flex justify-between items-center py-2 animate-slideInRight" style="--delay: 1">
                  <div class="flex items-center">
                    <div class="w-10 h-10 rounded-full bg-gold-100 dark:bg-gray-700 flex items-center justify-center mr-3">
                      <i class="fas fa-gem text-gold-600 dark:text-gold-400"></i>
                    </div>
                    <span class="text-gray-700 dark:text-gray-300">Gold Value</span>
                  </div>
                  <div class="font-semibold flex items-baseline gap-2">
                    <span class="text-md text-gray-500 dark:text-gray-400">₹</span>
                    <span id="val_gold" class="text-xl text-gray-800 dark:text-white">0.00</span>
                  </div>
                </div>
                
                <div class="flex justify-between items-center py-2 animate-slideInRight" style="--delay: 2">
                  <div class="flex items-center">
                    <div class="w-10 h-10 rounded-full bg-gold-100 dark:bg-gray-700 flex items-center justify-center mr-3">
                      <i class="fas fa-tools text-gold-600 dark:text-gold-400"></i>
                    </div>
                    <span class="text-gray-700 dark:text-gray-300">Making Charges</span>
                  </div>
                  <div class="font-semibold flex items-baseline gap-2">
                    <span class="text-md text-gray-500 dark:text-gray-400">₹</span>
                    <span id="val_mc" class="text-xl text-gray-800 dark:text-white">0.00</span>
                  </div>
                </div>
                
                <div class="flex justify-between items-center py-2 animate-slideInRight" style="--delay: 3">
                  <div class="flex items-center">
                    <div class="w-10 h-10 rounded-full bg-gold-100 dark:bg-gray-700 flex items-center justify-center mr-3">
                      <i class="fas fa-percent text-gold-600 dark:text-gold-400"></i>
                    </div>
                    <span class="text-gray-700 dark:text-gray-300">GST</span>
                  </div>
                  <div class="font-semibold flex items-baseline gap-2">
                    <span class="text-md text-gray-500 dark:text-gray-400">₹</span>
                    <span id="val_gst" class="text-xl text-gray-800 dark:text-white">0.00</span>
                  </div>
                </div>
                
                <div class="h-px w-full bg-gray-200 dark:bg-gray-700 my-2"></div>
                
                <div class="flex justify-between items-center py-3 mt-2 animate-slideInRight" style="--delay: 4">
                  <div class="flex items-center">
                    <div class="w-12 h-12 rounded-full gold-gradient flex items-center justify-center mr-3">
                      <i class="fas fa-coins text-white text-lg"></i>
                    </div>
                    <span class="text-lg font-medium text-gray-800 dark:text-white">Total Payable</span>
                  </div>
                  <div class="flex items-baseline gap-2">
                    <span class="text-lg text-gray-600 dark:text-gray-400">₹</span>
                    <span id="val_total" class="text-3xl font-bold text-gold-600 dark:text-gold-400">0.00</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Recent Rates Card -->
      <div class="mt-8 bg-white dark:bg-gray-800 rounded-3xl overflow-hidden shadow-md border border-gray-200 dark:border-gray-700 transition-all duration-300 p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-semibold text-gold-600 dark:text-gold-400 flex items-center">
            <i class="fas fa-history mr-2"></i> Recent Gold Rates
          </h3>
          
          <!-- Purity filter for historical rates -->
          <div class="relative">
            <select id="historyPurity" class="text-sm bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg px-3 py-1.5 pr-8 focus:ring-2 focus:ring-gold-500 dark:focus:ring-gold-600 focus:border-transparent">
              <option value="24k">24K Gold</option>
              <option value="22k" selected>22K Gold</option>
              <option value="18k">18K Gold</option>
              <option value="14k">14K Gold</option>
            </select>
            <div class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
              <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
            </div>
          </div>
        </div>
        
        <div class="overflow-x-auto">
          <table class="w-full">
            <thead>
              <tr class="text-left border-b border-gray-200 dark:border-gray-700">
                <th class="py-3 px-4 font-semibold text-gray-600 dark:text-gray-300">Date</th>
                <th class="py-3 px-4 font-semibold text-gray-600 dark:text-gray-300">Rate (₹/g)</th>
                <th class="py-3 px-4 font-semibold text-gray-600 dark:text-gray-300">Change</th>
              </tr>
            </thead>
            <tbody id="ratesTable" class="text-gray-700 dark:text-gray-300">
              <!-- Rates will be populated here -->
              <tr>
                <td colspan="3" class="py-8 text-center text-gray-500 dark:text-gray-400">
                  <div class="flex flex-col items-center">
                    <div class="shimmer w-8 h-8 rounded-full mb-3"></div>
                    <div class="shimmer w-40 h-4 rounded"></div>
                  </div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Footer -->
      <div class="mt-8 text-center text-sm text-gray-500 dark:text-gray-400">
        <p>Gold price data powered by Gold Price API</p>
        <p class="mt-1">Prices updated in real-time. Last fetched: <span id="footerLastUpdated">Loading...</span></p>
      </div>
    </div>
  </main>

  <script>
    // Dark mode toggle
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark');
    }
    
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
      if (event.matches) {
        document.documentElement.classList.add('dark');
      } else {
        document.documentElement.classList.remove('dark');
      }
    });
    
    document.getElementById('darkModeToggle').addEventListener('click', () => {
      document.documentElement.classList.toggle('dark');
    });
    
    // Gold data model
    const goldData = {
      // Current prices for different purities
      prices: {
        '24k': 0,
        '22k': 0,
        '18k': 0,
        '14k': 0
      },
      // Previous prices for tracking changes
      previousPrices: {
        '24k': 0,
        '22k': 0,
        '18k': 0,
        '14k': 0
      },
      // Purity multipliers
      purityMultipliers: {
        '24k': 1,
        '22k': 0.9167,
        '18k': 0.75,
        '14k': 0.5833
      },
      lastUpdated: null,
      // Historical data for each purity
      historicalRates: {
        '24k': [],
        '22k': [],
        '18k': [],
        '14k': []
      }
    };
    
    // Format currency 
    const formatCurrency = (amount) => {
      return new Intl.NumberFormat('en-IN', {
        maximumFractionDigits: 2,
        minimumFractionDigits: 2
      }).format(amount);
    };
    
    // Format date
    const formatDate = (date) => {
      return new Intl.DateTimeFormat('en-IN', {
        day: '2-digit',
        month: 'short',
        year: 'numeric'
      }).format(date);
    };
    
    // Format time
    const formatTime = (date) => {
      return new Intl.DateTimeFormat('en-IN', {
        hour: '2-digit',
        minute: '2-digit',
        hour12: true
      }).format(date);
    };

    // Update last updated text
    const updateLastUpdated = (date = new Date()) => {
      const dateStr = formatDate(date);
      const timeStr = formatTime(date);
      document.getElementById('lastUpdated').textContent = `Last updated: ${timeStr}`;
      document.getElementById('footerLastUpdated').textContent = `${dateStr} ${timeStr}`;
    };
    
    // Update making charge unit
    document.querySelectorAll('input[name="mcType"]').forEach(radio => {
      radio.addEventListener('change', () => {
        document.getElementById('mcUnit').textContent = radio.value === 'percent' ? '%' : '₹/g';
      });
    });
    
    // Update selected price in the UI
    const updateSelectedPrice = () => {
      const selectedPurity = document.getElementById('purity').value;
      const priceEl = document.getElementById('selected_price');
      priceEl.textContent = formatCurrency(goldData.prices[selectedPurity]);
    };
    
    // On purity selection change
    document.getElementById('purity').addEventListener('change', (e) => {
      updateSelectedPrice();
    });
    
    // Update history purity display
    document.getElementById('historyPurity').addEventListener('change', (e) => {
      const selectedPurity = e.target.value;
      displayHistoricalRates(selectedPurity);
    });
    
    // Fetch Live Gold Price from API
    async function fetchGoldPrice() {
      const priceLoading = document.getElementById('priceLoading');
      const apiStatus = document.getElementById('apiStatus');
      
      apiStatus.classList.add('bg-yellow-100', 'text-yellow-800', 'dark:bg-yellow-900', 'dark:text-yellow-200');
      apiStatus.querySelector('span:first-child').classList.add('bg-yellow-500');
      apiStatus.querySelector('span:last-child').textContent = 'Fetching latest prices';
      
      // API request headers
      const headers = new Headers();
      headers.append("x-access-token", "goldapi-z5h94sm9zrhpz2-io"); // API key is a placeholder
      headers.append("Content-Type", "application/json");

      try {
        // Set loading state
        priceLoading.classList.remove('hidden');
        
        // Make API request  
        const response = await fetch("https://www.goldapi.io/api/XAU/INR", { 
          method: 'GET', 
          headers 
        });
        
        // Check response status
        if (!response.ok) {
          throw new Error(`API Error: ${response.status}`);
        }
        
        // Parse JSON response
        const data = await response.json();
        
        // Hide loading state
        priceLoading.classList.add('hidden');
        
        // Store previous prices before updating
        for (const purity in goldData.prices) {
          goldData.previousPrices[purity] = goldData.prices[purity];
        }
        
        // Process gold price data if valid
        if (data && data.price) {
          // Convert from troy ounce to grams (24K price)
          const pricePerGram24K = data.price / 31.1035;
          
          // Update 24K price
          goldData.prices['24k'] = pricePerGram24K;
          
          // Calculate prices for other purities
          for (const purity in goldData.purityMultipliers) {
            if (purity !== '24k') {
              goldData.prices[purity] = pricePerGram24K * goldData.purityMultipliers[purity];
            }
          }
          
          // Update the UI with all prices
          for (const purity in goldData.prices) {
            document.getElementById(`price_${purity}`).textContent = formatCurrency(goldData.prices[purity]);
          }
          
          // Update the selected price indicator
          updateSelectedPrice();
          
          // Update timestamp
          goldData.lastUpdated = new Date();
          updateLastUpdated(goldData.lastUpdated);
          
          // Update API status
          apiStatus.className = 'text-xs py-1 px-3 rounded-full inline-flex items-center';
          apiStatus.classList.add('bg-green-100', 'text-green-800', 'dark:bg-green-900', 'dark:text-green-200');
          apiStatus.querySelector('span:first-child').className = 'w-2 h-2 rounded-full mr-1 bg-green-500';
          apiStatus.querySelector('span:last-child').textContent = 'Live prices updated';
          
          // Generate historical rates for all purities
          generateHistoricalRates();
          
          // Display historical rates for currently selected purity
          const selectedHistoryPurity = document.getElementById('historyPurity').value;
          displayHistoricalRates(selectedHistoryPurity);
        } else {
          throw new Error('Invalid API response format');
        }
      } catch (error) {
        console.error('Gold price fetch error:', error);
        
        // Hide loading state and update error status
        priceLoading.classList.add('hidden');
        apiStatus.className = 'text-xs py-1 px-3 rounded-full inline-flex items-center';
        apiStatus.classList.add('bg-red-100', 'text-red-800', 'dark:bg-red-900', 'dark:text-red-200');
        apiStatus.querySelector('span:first-child').className = 'w-2 h-2 rounded-full mr-1 bg-red-500';
        apiStatus.querySelector('span:last-child').textContent = 'Failed to update prices';
        
        // Use fallback price for demo purposes
        if (goldData.prices['24k'] === 0) {
          // Set fallback 24K price
          goldData.prices['24k'] = 6324.75;
          
          // Calculate other purities based on 24K
          for (const purity in goldData.purityMultipliers) {
            if (purity !== '24k') {
              goldData.prices[purity] = goldData.prices['24k'] * goldData.purityMultipliers[purity];
            }
          }
          
          // Update UI with fallback prices
          for (const purity in goldData.prices) {
            document.getElementById(`price_${purity}`).textContent = formatCurrency(goldData.prices[purity]);
          }
          
          updateSelectedPrice();
          generateHistoricalRates();
          displayHistoricalRates(document.getElementById('historyPurity').value);
          
          goldData.lastUpdated = new Date();
          updateLastUpdated(goldData.lastUpdated);
        }
      }
    }
    
    // Generate historical rates for all purities
    function generateHistoricalRates() {
      const today = new Date();
      
      // Clear existing historical data
      for (const purity in goldData.historicalRates) {
        goldData.historicalRates[purity] = [];
      }
      
      // Generate 7 days of data for each purity
      for (const purity in goldData.prices) {
        let previousRate = goldData.prices[purity];
        
        for (let i = 6; i >= 0; i--) {
          const date = new Date(today);
          date.setDate(date.getDate() - i);
          
          // Small random change from previous day (±2%)
          const changePercent = (Math.random() * 4) - 2;
          const changeAmount = previousRate * (changePercent / 100);
          const rate = i === 0 ? goldData.prices[purity] : previousRate + changeAmount;
          
          goldData.historicalRates[purity].push({
            date: date,
            rate: rate,
            change: changePercent
          });
          
          previousRate = rate;
        }
        
        // Sort from newest to oldest
        goldData.historicalRates[purity].sort((a, b) => b.date - a.date);
      }
    }
    
    // Display historical rates for selected purity
    function displayHistoricalRates(purity) {
      const ratesTable = document.getElementById('ratesTable');
      ratesTable.innerHTML = '';
      
      if (!goldData.historicalRates[purity] || goldData.historicalRates[purity].length === 0) {
        const loadingRow = document.createElement('tr');
        loadingRow.innerHTML = `
          <td colspan="3" class="py-8 text-center text-gray-500 dark:text-gray-400">
            <div class="flex flex-col items-center">
              <div class="shimmer w-8 h-8 rounded-full mb-3"></div>
              <div class="shimmer w-40 h-4 rounded"></div>
            </div>
          </td>
        `;
        ratesTable.appendChild(loadingRow);
        return;
      }
      
      // Add rows for each historical rate
      goldData.historicalRates[purity].forEach(day => {
        const row = document.createElement('tr');
        row.className = 'border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors';
        
        const dateCell = document.createElement('td');
        dateCell.className = 'py-3 px-4';
        dateCell.textContent = formatDate(day.date);
        
        const rateCell = document.createElement('td');
        rateCell.className = 'py-3 px-4 font-medium';
        rateCell.textContent = '₹' + formatCurrency(day.rate);
        
        const changeCell = document.createElement('td');
        changeCell.className = 'py-3 px-4';
        
        const changeSpan = document.createElement('span');
        changeSpan.className = 'px-2 py-1 rounded text-xs font-medium';
        
        if (day.change > 0) {
          changeSpan.classList.add('bg-green-100', 'text-green-800', 'dark:bg-green-900', 'dark:text-green-200');
          changeSpan.innerHTML = `<i class="fas fa-arrow-up mr-1"></i>${day.change.toFixed(2)}%`;
        } else if (day.change < 0) {
          changeSpan.classList.add('bg-red-100', 'text-red-800', 'dark:bg-red-900', 'dark:text-red-200');
          changeSpan.innerHTML = `<i class="fas fa-arrow-down mr-1"></i>${Math.abs(day.change).toFixed(2)}%`;
        } else {
          changeSpan.classList.add('bg-gray-100', 'text-gray-500', 'dark:bg-gray-700', 'dark:text-gray-400');
          changeSpan.innerHTML = `<i class="fas fa-minus mr-1"></i>0.00%`;
        }
        
        changeCell.appendChild(changeSpan);
        
        row.appendChild(dateCell);
        row.appendChild(rateCell);
        row.appendChild(changeCell);
        
        ratesTable.appendChild(row);
      });
    }

    // Price calculation
    document.getElementById('calculatorForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      // Get input values
      const selectedPurity = document.getElementById('purity').value;
      const price = goldData.prices[selectedPurity]; // Use price for selected purity
      const weight = parseFloat(document.getElementById('weight').value);
      const mcType = document.querySelector('input[name=mcType]:checked').value;
      const mcVal = parseFloat(document.getElementById('mcValue').value);
      const gstRate = parseFloat(document.getElementById('gstRate').value);
      
      // Validate inputs
      if ([price, weight, mcVal, gstRate].some(v => isNaN(v) || v < 0)) {
        console.error('Invalid input values');
        return;
      }
      
      // Calculate values
      const goldValue = price * weight; // No purity multiplier needed as price already includes purity
      const mcAmount = mcType === 'percent' ? (goldValue * mcVal / 100) : (mcVal * weight);
      const gstAmount = (mcAmount * gstRate / 100);
      const total = goldValue + mcAmount + gstAmount;
      
      // Update display purity and weight in result card
      document.getElementById('display_purity').textContent = selectedPurity.toUpperCase() + ' Gold';
      document.getElementById('display_weight').textContent = weight + 'g';
      
      // Show result card if hidden
      const resultCard = document.getElementById('resultCard');
      if (resultCard.classList.contains('hidden')) {
        resultCard.classList.remove('hidden');
      }
      
      // Animate value changes
      animateValue('val_gold', goldValue);
      animateValue('val_mc', mcAmount);
      animateValue('val_gst', gstAmount);
      animateValue('val_total', total);
      
      // Scroll to result
      setTimeout(() => {
        resultCard.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }, 100);
    });
    
    // Value animation function
    function animateValue(id, targetValue, duration = 800) {
      const element = document.getElementById(id);
      const startValue = parseFloat(element.textContent.replace(/,/g, '')) || 0;
      const startTime = performance.now();
      
      function updateValue(timestamp) {
        const elapsed = timestamp - startTime;
        const progress = Math.min(elapsed / duration, 1);
        
        // Easing function (easeOutQuart)
        const easeOut = 1 - Math.pow(1 - progress, 4);
        
        // Calculate current value
        const currentValue = startValue + (targetValue - startValue) * easeOut;
        
        // Update element
        element.textContent = formatCurrency(currentValue);
        
        // Continue animation if not complete
        if (progress < 1) {
          requestAnimationFrame(updateValue);
        }
      }
      
      requestAnimationFrame(updateValue);
    }
    
    // Initialize app
    fetchGoldPrice();
    
    // Auto-refresh price every 5 minutes (300000ms)
    setInterval(fetchGoldPrice, 300000);
  </script>
</body>
</html>
