<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta name="google-site-verification" content="Fn8ri9RLegwF2izp3g2BTQ5UrPZNY5ehkJ-U6vlHrMM" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gold Calculator</title>

  <!-- Tailwind + custom theme colors -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            primary: '#5D5CDE',
            gold:    '#D4AF37'
          }
        }
      }
    }
  </script>

  <!-- Poppins font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Poppins', sans-serif; }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px) scale(0.95); }
      to   { opacity: 1; transform: translateY(0) scale(1); }
    }
    .animate-fadeInUp { animation: fadeInUp 0.6s ease-out forwards; }
  </style>
</head>

<body class="min-h-screen flex items-center justify-center p-6 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors">
  <!-- Dark/Light toggle -->
  <button id="themeToggle" class="absolute top-6 right-6 p-2 rounded-lg bg-white/50 dark:bg-gray-700/50 backdrop-blur transition" aria-label="Toggle theme">
    <svg id="iconLight" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364-6.364l-1.414 1.414M7.05 16.95l-1.414 1.414m0-12.728l1.414 1.414M16.95 16.95l1.414 1.414" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
    </svg>
    <svg id="iconDark" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
    </svg>
  </button>

  <div class="w-full max-w-lg bg-white/50 dark:bg-gray-800/50 backdrop-blur-2xl rounded-3xl shadow-2xl p-8 transform hover:scale-[1.02] transition">
    <h1 class="text-4xl font-extrabold text-center mb-6 text-primary">Gold Calculator</h1>
    <div class="space-y-5">
      <!-- Today's rate -->
      <div>
        <label class="block font-semibold mb-1">Today's Price (₹/g)</label>
        <input id="price" type="number" step="0.01" value="₹9,830"
               class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary transition"/>
      </div>
      <!-- Purity & Weight -->
      <div class="flex gap-4">
        <div class="flex-1">
          <label class="block font-semibold mb-1">Purity</label>
          <select id="purity" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary transition">
            <option value="1">24K</option>
            <option value="0.9167">22K</option>
            <option value="0.75">18K</option>
            <option value="0.5833">14K</option>
          </select>
        </div>
        <div class="flex-1">
          <label class="block font-semibold mb-1">Weight (g)</label>
          <input id="weight" type="number" step="0.01" value="1"
                 class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary transition"/>
        </div>
      </div>
      <!-- Making charge mode -->
      <div>
        <label class="block font-semibold mb-1">Making Charge</label>
        <div class="flex items-center gap-4 mb-2">
          <label class="inline-flex items-center">
            <input type="radio" name="mcType" value="percent" checked class="form-radio"/>
            <span class="ml-2">Percentage (%)</span>
          </label>
          <label class="inline-flex items-center">
            <input type="radio" name="mcType" value="fixed" class="form-radio"/>
            <span class="ml-2">Fixed (₹/g)</span>
          </label>
        </div>
        <input id="mcValue" type="number" step="0.01" value="10"
               class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-primary transition"/>
      </div>
      <!-- Calculate -->
      <button id="calculateBtn" class="w-full py-3 bg-primary text-white font-bold rounded-lg hover:shadow-lg active:scale-95 transition">
        Calculate
      </button>
    </div>

    <!-- Results -->
    <div id="result" class="mt-8 hidden opacity-0 bg-white/70 dark:bg-gray-700/70 backdrop-blur-xl border-l-4 border-primary rounded-lg p-6 shadow-inner">
      <h2 class="text-2xl font-bold text-primary mb-4 animate-fadeInUp">Breakdown</h2>
      <div class="space-y-2">
        <div class="flex justify-between"><span>Gold Value:</span> ₹<span id="val_gold">0.00</span></div>
        <div class="flex justify-between"><span>Making Charge:</span> ₹<span id="val_mc">0.00</span></div>
        <div class="flex justify-between"><span>GST (3% on MC):</span> ₹<span id="val_gst">0.00</span></div>
        <div class="flex justify-between font-semibold"><span>Total Payable:</span> ₹<span id="val_total">0.00</span></div>
      </div>
    </div>

    <!-- Recent rates -->
    <div class="mt-8">
      <h3 class="text-xl font-semibold mb-2">Recent Gold Rates (₹/g)</h3>
      <table class="w-full text-sm rounded-lg overflow-hidden">
        <thead class="bg-primary text-white">
          <tr><th class="p-2">Date</th><th class="p-2">Rate</th></tr>
        </thead>
        <tbody id="ratesTable" class="bg-white dark:bg-gray-800"></tbody>
      </table>
    </div>
  </div>

  <script>
    // Dark mode toggle
    const html = document.documentElement;
    const iconL = document.getElementById('iconLight');
    const iconD = document.getElementById('iconDark');
    function updTheme(){
      if(html.classList.toggle('dark')){
        iconL.classList.remove('hidden'); iconD.classList.add('hidden');
      } else {
        iconD.classList.remove('hidden'); iconL.classList.add('hidden');
      }
    }
    document.getElementById('themeToggle').addEventListener('click', updTheme);
    updTheme();

    // Populate recent rates (last 7 days, ±random)
    const ratesTbl = document.getElementById('ratesTable');
    const base = parseFloat(document.getElementById('price').value);
    const today = new Date();
    for(let i=6;i>=0;i--){
      const d = new Date(today - i*864e5);
      const dd = d.toLocaleDateString('en-IN',{ day:'2-digit', month:'short' });
      const rnd = (base + (Math.random()*100-50)).toFixed(2);
      const tr = document.createElement('tr');
      tr.innerHTML = `<td class="p-2">${dd}</td><td class="p-2 text-right">${rnd}</td>`;
      ratesTbl.appendChild(tr);
    }

    // Calculation logic
    document.getElementById('calculateBtn').addEventListener('click',()=>{
      const price  = parseFloat(document.getElementById('price').value);
      const purity = parseFloat(document.getElementById('purity').value);
      const weight = parseFloat(document.getElementById('weight').value);
      const mcType = document.querySelector('input[name=mcType]:checked').value;
      const mcVal  = parseFloat(document.getElementById('mcValue').value);

      if([price, purity, weight, mcVal].some(v=>isNaN(v)||v<=0)){
        return alert('Please enter valid positive values');
      }

      const goldValue = price * purity * weight;
      let mcAmount = mcType==='percent'
        ? goldValue * mcVal/100
        : mcVal * weight;
      const gstAmount = mcAmount * 0.03;
      const total = goldValue + mcAmount + gstAmount;

      const anim = (id, from, to) => {
        const el = document.getElementById(id);
        let start=null;
        function step(ts){
          if(!start) start=ts;
          const prog=Math.min((ts-start)/600,1);
          el.textContent=(from+(to-from)*prog).toFixed(2);
          if(prog<1) requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
      };

      ['val_gold','val_mc','val_gst','val_total'].forEach(id=>document.getElementById(id).textContent='0.00');
      anim('val_gold',0,goldValue);
      anim('val_mc',  0,mcAmount);
      anim('val_gst',  0,gstAmount);
      anim('val_total',0,total);

      const res = document.getElementById('result');
      res.classList.remove('hidden','opacity-0');
      res.classList.add('animate-fadeInUp');
      res.scrollIntoView({ behavior:'smooth' });
    });
  </script>
</body>
</html>
